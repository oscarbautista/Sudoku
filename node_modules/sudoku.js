
/*
 * Creates and returns an empty puzzle
 */
exports.createPuzzle = function () {

	var puzzle = [ [],[],[],[],[],[],[],[],[] ];
	return puzzle;
};


/*
 * Returns the digit at the current cell
 */
exports.getCell = function (puzzle, row, col) {

	if (puzzle == null) return;

	return puzzle[row][col];
};

/*
 * Replaces the digit at the current cell
 */
exports.setCell = function (puzzle, row, col, digit) {

	if (puzzle == null) return "";

	if(validateCell(puzzle, row, col, digit)) {
		puzzle[row][col] = digit;
		return "";
	}
	else {
		return "Puzzle no longer valid";
	}
};

/*
 * Returns a printable string that displays the puzzle in its entirety
 */
exports.printPuzzle = function (puzzle) {

	var print = "-------------------------------\n";

	for(var row = 0; row <= 8; row++) {
		for(var col = 0; col <= 8; col++) {
			if(col == 0 || col == 3 || col == 6) print += "| ";
			print += puzzle[row][col] + "  ";
			if(col == 8) print += "|" + "\n";
		}
		if(row == 2 || row == 5 || row == 8) print += "-------------------------------\n";
	}

	return print;
};



/*
 * Checks that the digit placed inside the cell respects the three constraints:
 * - Each horizontal row contains each digit exactly once
 * - Each vertical column contains each digit exactly once
 * - Each sub grid or region contains each digit exactly once
 */
function validateCell (puzzle, row, col, digit) {

	var valid = true;

	// Checks for row validity
	for(var i = 0; i <= 8; i++) {
		
		if(digit == puzzle[row][i]) {
			valid = false;
			return valid;
		}
	}

	// Checks for column validity
	for(var i = 0; i <= 8; i++) {
		
		if(digit == puzzle[i][col]) {
			valid = false;
			return valid;
		}
	}

	// Checks for region validity
	var startRow = Math.floor(row/3) * 3;
	var startCol = Math.floor(col/3) * 3;

	for(var i = startRow; i <= startRow + 2; i++) {
		for(var j = startCol; j <= startCol + 2; j++) {

			if(digit == puzzle[i][j]) {
				valid = false;
				return valid;
			}
		}
	}

	return valid;
};
